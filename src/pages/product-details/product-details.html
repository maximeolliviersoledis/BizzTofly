<ion-header>
    <ion-navbar>
        <button ion-button menuToggle start>
            <ion-icon name="menu"></ion-icon>
        </button>
        <ion-title>BizzToFly</ion-title>
        <ion-buttons end>
            <button ion-button icon-only color="royal" class="header-btn-cart" (click)="navcart()">
                <ion-icon name="cart"></ion-icon>
                <ion-badge class="carts" item-right color="danger">{{noOfItems}}</ion-badge>
            </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>


<ion-content >
    <ion-row class="productImage">
            <img class="main-image" src={{productDetails.image}} alt="">
             <!--<span clear text-center (click)="toggleFavourite()"> -->
            <ion-icon class="fav" name="heart" *ngIf="like"
                      (click)="removeFromFavourite(productDetails.id)"></ion-icon>
            <ion-icon class="fav heart-clicked" name="heart" *ngIf="!like"
                      (click)="addToFavourite(productDetails.id)"></ion-icon>
     <!--</span>--> 
    </ion-row>
    <ion-row>
        <ion-col *ngFor="let img of productDetails.images">
            <img src={{img}} class="small-image" (click)="changerImagePrincipale(img)">
        </ion-col>
    </ion-row>

    
    <ion-row>
        <h1>{{productDetails.name}}</h1>
        <div class="desc" [innerHTML]="productDetails.description_short"></div>
        <div class="price-container">
            <!-- <span>{{'Price' | translate}} : </span> -->
            <span class="price">{{productDetails.price | number:'.2-2'}} €</span>
        </div>
        <ion-item>
            <ion-label>{{'Combination' | translate}} :</ion-label>            
            <ion-select [(ngModel)]="id_declinaisons" (ionChange)="getCorrespondingCombination()" placeholder="{{'Select a combination' | translate}}">
                <ion-option *ngFor="let dec of productDetails.declinaisons" value={{dec.id}}>{{dec.name}}</ion-option>
            </ion-select>
        </ion-item>
            
            <div *ngIf="quantity>0;then thenBlock else elseBlock"></div>

            <!--<ng-template #thenBlock><ion-label>Quantité : {{declinaison.combination.quantity}}</ion-label></ng-template>-->
            <ng-template #thenBlock>{{'In stock' | translate}} : {{quantity}}</ng-template>
            <ng-template #elseBlock>{{'Total in stock' | translate}} : {{productDetails.quantity}}</ng-template>
        
       <!-- <span *ngIf="productDetails.available_now == 'En stock'">Produit disponible</span>-->
        
    </ion-row>
    <!-- <ion-row>
        <ion-col col-6>
            <a (click)="addToCart(productDetails.id)" ion-button icon-left full class="btn-add-to-cart">
                <ion-icon name="cart"></ion-icon>
                {{'CHECKOUT' | translate}}
            </a>
        </ion-col>
        <ion-col col-6>
            <a (click)="home()" ion-button icon-left full class="btn-add-to-cart">
                <ion-icon name="basket"></ion-icon>
                {{'KEEP SHOPPING' |translate}}
            </a>
        </ion-col>
    </ion-row> -->


   <!-- <ion-row>
        <ion-slides initialSlide=0 speed="3000" loop="true" pager="true" dir="rtl">
            <ion-slide *ngFor="let img of productDetails.images">
                <div class="overlay">
                    <img src={{img}} class="slider-img">
                </div>
            </ion-slide>
        </ion-slides>
    </ion-row>-->
</ion-content>

<ion-footer>
    <ion-toolbar>
        <ion-row class="count-full">
            <ion-col col-4>
                <div class="count">
                <span class="item-count" (click)="remove()">
                  -
                </span>
                    <span class="item-count show-count">
                  {{count}}
                </span>
                    <span class="item-count" (click)="add()">
                  +
                </span>
                </div>
            </ion-col>

            <ion-col col-8>
                <a (click)="addToCart(productDetails.id)" ion-button icon-left full class="btn-add-to-cart">
                    <ion-icon name="cart"></ion-icon>
                    {{'ADD TO CART' | translate}}
                </a>
            </ion-col>
        </ion-row>
    </ion-toolbar>
</ion-footer>
